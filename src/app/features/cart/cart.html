<div class="min-h-[calc(100vh-140px)] flex flex-col p-6">
  <h2 class="font-serif text-3xl text-spirit-primary mb-8 text-center">Mon Panier</h2>

  @if (items().length > 0) {
    <div class="flex-1 space-y-6">
      @for (item of items(); track item.id) {
        <div
          class="flex items-center gap-4 bg-white p-4 rounded-3xl shadow-sm border border-gray-50 animate-in fade-in slide-in-from-right-4">
          <div class="h-20 w-20 rounded-2xl overflow-hidden bg-spirit-background shrink-0">
            <img [ngSrc]="item.image" class="h-full w-full object-cover" [alt]="item.name">
          </div>

          <div class="flex-1">
            <h3 class="font-medium text-gray-900">{{ item.name }}</h3>
            <p class="text-spirit-primary font-bold">{{ item.price }}€</p>

            <div class="flex items-center gap-3 mt-2">
              <button (click)="updateQty(item.id, -1)"
                      class="h-8 w-8 rounded-full border border-gray-100 flex items-center justify-center active:bg-gray-50">
                <mat-icon class="scale-75">remove</mat-icon>
              </button>
              <span class="text-sm font-bold w-4 text-center">{{ item.quantity }}</span>
              <button (click)="updateQty(item.id, 1)"
                      class="h-8 w-8 rounded-full border border-gray-100 flex items-center justify-center active:bg-gray-50">
                <mat-icon class="scale-75">add</mat-icon>
              </button>
            </div>
          </div>

          <button (click)="remove(item.id)" class="text-gray-300 hover:text-red-400 p-2">
            <mat-icon>delete_outline</mat-icon>
          </button>
        </div>
      }
    </div>

    <div class="mt-10 p-6 bg-spirit-primary/5 rounded-[32px] space-y-4">
      <div class="flex justify-between items-center text-gray-600">
        <span>Sous-total ({{ count() }} articles)</span>
        <span>{{ total() }}€</span>
      </div>
      <div class="flex justify-between items-center text-gray-600 border-b border-gray-200 pb-4">
        <span>Livraison / Frais</span>
        <span class="text-green-600 font-medium italic">Offert</span>
      </div>
      <div class="flex justify-between items-center text-xl font-bold text-spirit-primary pt-2">
        <span>Total</span>
        <span>{{ total() }}€</span>
      </div>

      <button
        class="w-full py-4 bg-spirit-primary text-white rounded-2xl font-bold shadow-xl shadow-spirit-primary/20 active:scale-95 transition-all mt-4 flex items-center justify-center gap-2">
        Procéder au paiement
        <mat-icon>arrow_forward</mat-icon>
      </button>
    </div>
  } @else {
    <div class="flex-1 flex flex-col items-center justify-center text-center space-y-6">
      <div class="w-32 h-32 bg-spirit-background rounded-full flex items-center justify-center text-spirit-primary/20">
        <mat-icon class="!w-16 !h-16 text-6xl">shopping_basket</mat-icon>
      </div>
      <div>
        <h3 class="text-xl font-medium text-gray-900">Votre panier est vide</h3>
        <p class="text-gray-500 mt-2">Laissez-vous guider par votre intuition...</p>
      </div>
      <button routerLink="/boutique" class="px-8 py-3 bg-spirit-accent text-white rounded-full font-medium shadow-lg">
        Découvrir nos créations
      </button>
    </div>
  }
</div>
