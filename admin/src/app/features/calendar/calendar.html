<div class="min-h-screen bg-gray-50 p-6 pb-24">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-2xl font-serif text-admin-dark">Agenda</h1>

    <div class="flex items-center gap-4 bg-white p-1 rounded-lg shadow-sm border border-gray-200">
      <button mat-icon-button (click)="previousMonth()">
        <mat-icon>chevron_left</mat-icon>
      </button>
      <span class="font-bold text-gray-700 w-32 text-center select-none">
        {{ viewDate() | date:'MMMM yyyy' }}
      </span>
      <button mat-icon-button (click)="nextMonth()">
        <mat-icon>chevron_right</mat-icon>
      </button>
      <button mat-button (click)="today()" class="ml-2 text-admin-primary">Aujourd'hui</button>
    </div>
  </div>

  <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
    <!-- Header Semaine -->
    <div class="grid grid-cols-7 border-b border-gray-200 bg-gray-50">
      @for (day of weekDays; track day) {
        <div class="py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider">
          {{ day }}
        </div>
      }
    </div>

    <!-- Grille Calendrier -->
    <div class="grid grid-cols-7 auto-rows-fr bg-gray-200 gap-px border-b border-gray-200">
      @for (date of calendarDays(); track date) {
        <div class="min-h-[120px] bg-white p-2 relative group hover:bg-gray-50 transition-colors"
             [class.bg-gray-50]="!isCurrentMonth(date)">

          <!-- Date Number -->
          <div class="flex justify-between items-start">
            <span class="text-sm font-medium h-7 w-7 flex items-center justify-center rounded-full"
                  [class.bg-admin-primary]="isToday(date)"
                  [class.text-white]="isToday(date)"
                  [class.text-gray-900]="isCurrentMonth(date) && !isToday(date)"
                  [class.text-gray-400]="!isCurrentMonth(date)">
              {{ date | date:'d' }}
            </span>
          </div>

          <!-- Events -->
          <div class="mt-2 space-y-1">
            @for (event of getEventsForDay(date); track event.id) {
              <div class="px-2 py-1 rounded text-xs font-medium bg-blue-50 text-blue-700 border border-blue-100 truncate cursor-pointer hover:bg-blue-100 transition-colors"
                   [title]="event.title + ' - ' + event.customer">
                <span class="font-bold">{{ event.start | date:'HH:mm' }}</span> {{ event.title }}
              </div>
            }
          </div>

        </div>
      }
    </div>
  </div>
</div>
